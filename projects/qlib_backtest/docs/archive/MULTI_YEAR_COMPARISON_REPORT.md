# SuperTrend 标准版 vs 增强版多年份多频率回测对比报告

**测试数据**: RB9999.XSGE（螺纹钢期货主力）
**测试年份**: 2023、2024、2025
**测试频率**: 15分钟、60分钟
**增强版参数**: SF14Re 标准 (period=50, multiplier=20, n=3, trailing_stop_rate=80)
**标准版参数**: (period=10, multiplier=3.0) - 之前回测的最好参数组合

---

## 📊 核心指标对比 - 15分钟频率

| 年份 | 版本 | 累计收益 | 年化收益 | 最大回撤 | 夏普比率 | 胜率 | 交易次数 | 买入持有收益 | 改进 |
|------|------|----------|----------|----------|----------|------|----------|-------------|------|
| **2023** | 标准版 | **-4.29%** | -2.69% | 18.85% | -0.14 | 49.66% | 185 | -0.69% | 基准 |
| 2023 | 增强版 | -16.84% ❌ | **-82.12%** ❌ | **17.14%** ✅ | -5.63 ❌ | 48.57% | **5** ✅ | -0.69% | **-12.55%** |
| **2024** | 标准版 | **35.90%** | **21.13%** ✅ | 14.33% | 1.40 | 51.29% | 165 | -17.94% | 基准 |
| 2024 | 增强版 | 6.52% ❌ | 80.70% ✅ | **14.39%** ✅ | 1.47 ✅ | 51.62% | **4** ✅ | -17.94% | **-29.38%** |
| **2025** | 标准版 | **6.42%** | 3.94% | 12.40% | 0.42 | 50.82% | 171 | -5.03% | 基准 |
| 2025 | 增强版 | 1.68% ❌ | **16.75%** ✅ | **7.99%** ✅ | 0.65 | 50.81% | **2** ✅ | -5.03% | **-4.74%** |

### 15分钟频率 - 三年平均

| 指标 | 标准版 | 增强版 | 改进幅度 |
|------|--------|--------|----------|
| 累计收益 | **12.68%** | -2.88% | **-15.56%** |
| 年化收益 | 7.46% | 5.11% | -2.35% |
| 最大回撤 | 15.19% | **13.17%** | **-2.02%** |
| 夏普比率 | 0.56 | -1.17 | -1.73 |
| 胜率 | 50.59% | 50.33% | -0.26% |
| 交易次数 | 173.7 | **3.7** | -98.8% |

---

## 📊 核心指标对比 - 60分钟频率

| 年份 | 版本 | 累计收益 | 年化收益 | 最大回撤 | 夏普比率 | 胜率 | 交易次数 | 买入持有收益 | 改进 |
|------|------|----------|----------|----------|----------|------|----------|-------------|------|
| **2023** | 标准版 | **15.58%** | **31.06%** ✅ | 8.97% | **1.27** ✅ | 51.09% | 61 | -0.94% | 基准 |
| 2023 | 增强版 | 1.11% ❌ | 36.19% ✅ | **14.92%** ❌ | 0.79 ❌ | 49.23% | **2** ✅ | -0.94% | **-14.47%** |
| **2024** | 标准版 | **3.37%** | 6.41% | 15.94% | 0.38 | 50.56% | 73 | -17.86% | 基准 |
| 2024 | 增强版 | -2.77% ❌ | **-54.67%** ❌ | **19.67%** ❌ | -0.65 ❌ | 52.08% | **2** ✅ | -17.86% | **-6.14%** |
| **2025** | 标准版 | -5.27% | -9.61% | 10.04% | -0.48 | 50.36% | 71 | -5.43% | 基准 |
| 2025 | 增强版 | -3.09% ✅ | **-58.39%** ❌ | 8.30% ✅ | -2.35 ❌ | 52.32% | **1** ✅ | -5.43% | **2.18%** |

### 60分钟频率 - 三年平均

| 指标 | 标准版 | 增强版 | 改进幅度 |
|------|--------|--------|----------|
| 累计收益 | **4.56%** | -1.58% | -6.14% |
| 年化收益 | 9.29% | -25.62% | -34.91% |
| 最大回撤 | 11.65% | 14.30% | -2.65% |
| 夏普比率 | 0.39 | -0.74 | -1.13 |
| 胜率 | 50.67% | 51.21% | 0.54% |
| 交易次数 | 68.3 | **1.7** | -97.5% |

---

## 🎯 关键发现

### ❌ 增强版表现不佳的原因

#### 1. **参数不匹配频率** 
- SF14Re 标准参数 (period=50, multiplier=20) 是针对 **1分钟数据** 设计的
- **15分钟** 数据的波动特征不同，需要更小的 ATR 周期和倍数
- **60分钟** 数据波动更大，参数更加不匹配

#### 2. **过度保守**
- ATR 周期 50 对于 15min/60min 来说太长，导致信号延迟
- ATR 倍数 20 导致通道过宽，错过很多交易机会
- 交易次数减少 98%，错过太多利润机会

#### 3. **年度表现不稳定**

**15分钟频率**：
- 2023年: 标准版 -4.29% vs 增强版 -16.84% (差 12.55%)
- 2024年: 标准版 35.90% vs 增强版 6.52% (差 29.38%)
- 2025年: 标准版 6.42% vs 增强版 1.68% (差 4.74%)

**60分钟频率**：
- 2023年: 标准版 15.58% vs 增强版 1.11% (差 14.47%)
- 2024年: 标准版 3.37% vs 增强版 -2.77% (差 6.14%)
- 2025年: 增强版略好 (-3.09% vs -5.27%)

---

## 💡 结论与建议

### ❌ 不适合场景

**当前 SF14Re 标准参数 (50, 20, 3, 80) 不适用于**：
- 15分钟频率的数据
- 60分钟频率的数据
- 中长期趋势跟踪
- 波动较小的市场环境

**原因**：
- 参数是为 1分钟高频数据设计的
- 频率降低后，数据波动特征完全不同
- 需要重新优化参数

### ✅ 适用场景

**增强版适用于**：
- 1分钟数据（已经验证效果优秀：累计收益 6.97% vs 标准版 -7.46%）
- 高频交易
- 波动较大的市场环境
- 需要大幅降低交易频率的场景

### 🎯 优化建议

如果要在 15min/60min 频率使用增强版，需要：

#### 1. **参数优化**

根据频率调整参数：

| 频率 | 建议 period | 建议 multiplier | 建议 n | 建议 trailing_stop_rate |
|------|-------------|----------------|--------|------------------------|
| **1min** | 50 | 20 | 3 | 80 |
| **15min** | 20-30 | 8-12 | 2-3 | 60-70 |
| **60min** | 10-15 | 5-8 | 2 | 50-60 |

#### 2. **动态参数调整**

```python
# 根据频率自动调整参数的示例
def get_params_by_freq(freq):
    if freq == "1min":
        return {'period': 50, 'multiplier': 20, 'n': 3, 'ts': 80}
    elif freq == "15min":
        return {'period': 25, 'multiplier': 10, 'n': 2, 'ts': 65}
    elif freq == "60min":
        return {'period': 12, 'multiplier': 6, 'n': 2, 'ts': 55}
```

#### 3. **测试不同的止损参数**

- 降低 trailing_stop_rate (60-70 vs 80)
- 调整 max_holding_period (50-80 vs 100)
- 优化 min_liqka 和 max_liqka 的范围

---

## 📈 总结

**对比结论**：

1. **1分钟数据**：增强版表现优秀 ✅
   - 累计收益：6.97% vs -7.46%（标准版）
   - 夏普比率：0.50 vs -0.28（标准版）

2. **15分钟数据**：增强版表现不佳 ❌
   - 三年累计收益：-2.88% vs 12.68%（标准版）
   - 年化收益：5.11% vs 7.46%（标准版）

3. **60分钟数据**：增强版表现不佳 ❌
   - 三年累计收益：-1.58% vs 4.56%（标准版）
   - 年化收益：-25.62% vs 9.29%（标准版）

**关键教训**：
- 增强版参数不能简单套用到不同频率
- 需要根据数据特征重新优化参数
- SF14Re 的优势主要体现在 1 分钟高频数据

**推荐使用**：
- **1分钟数据**：增强版 SuperTrend（SF14Re 标准参数）
- **15分钟数据**：标准版 SuperTrend (10, 3.0)
- **60分钟数据**：标准版 SuperTrend (10, 3.0) 或 (14, 2.5)

---

**生成时间**: 2026-02-15
**测试工具**: Qlib + Python
**数据来源**: 本地 Qlib 数据
