# 策略代码库

## 概述

本文件夹集中管理所有量化交易策略的详细说明文档，包括策略逻辑、参数配置、回测结果和实现代码。

**策略项目位置**: `projects/` 目录下各子项目

---

## 已实现策略

### 1. MSB-OB 订单块策略

**文件**: `MSB-OB订单块策略.md`

**策略类型**: 价格行为 + 机构订单流

**核心逻辑**:
- 识别市场结构突破 (MSB)
- 回溯寻找逆向K线作为订单块 (OB)
- 计算订单块质量评分
- 价格回调至订单块区域入场

**适用场景**:
- 期货商品合约
- 1分钟级别
- 趋势延续和反转

**实现路径**: `projects/qlib_msb_ob/`

**版本演进**:
- v01_original_pine - Pine Script 原版移植
- v02_simple_entry - 简化入场版本
- v03_hybrid - 混合优化版本

---

### 2. SuperTrend 趋势跟踪策略

**文件**: `SuperTrend趋势跟踪策略.md`

**策略类型**: 趋势跟踪

**核心逻辑**:
- 基于 ATR 的动态止损线
- 价格突破 SuperTrend 线作为入场信号
- 趋势反转自动平仓

**适用场景**:
- 趋势明显的市场
- 中长周期 (60分钟、日线)
- 单边行情

**实现路径**: `projects/akquant_supertrend/`

**回测结果**: 2024年螺纹钢表现不佳（震荡市）

---

## 策略对比

| 策略 | 类型 | 周期 | 2024表现 | 适用市场 | 复杂度 |
|------|------|------|---------|---------|--------|
| MSB-OB | 价格行为 | 1分钟 | 待验证 | 震荡+趋势 | ⭐⭐⭐⭐ |
| SuperTrend | 趋势跟踪 | 15-60分钟 | 负收益 | 趋势市场 | ⭐⭐ |

---

## 策略开发流程

### 1. Pine Script 验证
- 在 TradingView 上可视化验证
- 观察信号质量
- 调整核心参数

### 2. Python 移植
- 使用 Qlib 或 AKQuant 框架
- 完整实现交易逻辑
- 添加风控模块

### 3. 回测验证
- 信号级回测（初步验证）
- 真实成本回测（必须执行）
- 多周期、多品种测试

### 4. 参数优化
- 网格搜索/Optuna优化
- 样本内/样本外验证
- 避免过拟合

### 5. 实盘模拟
- 模拟账户测试
- 监控滑点影响
- 调整执行逻辑

---

## 回测配置标准

所有策略回测必须包含以下配置：

### 交易成本

| 成本项 | 螺纹钢标准 | 说明 |
|--------|-----------|------|
| 手续费 | 0.01% | 万分之一（开平各收） |
| 滑点 | 1 tick | 1元/吨 |
| 保证金 | 10% | 占用资金成本 |
| 合约乘数 | 10 | 10吨/手 |

### 风控参数

- **单次仓位**: ≤ 30%
- **总仓位**: ≤ 50%
- **止损**: 策略内置
- **止盈**: 策略内置

### 回测引擎

- **Qlib**: 微软开源量化框架
- **AKQuant**: Rust 高性能回测引擎
- **RealisticEngine**: 自定义真实成本引擎

---

## 重要提示

⚠️ **回测陷阱**

1. **未包含交易成本**
   - 症状：收益率虚高，夏普比例失真
   - 解决：必须包含手续费、滑点、保证金占用

2. **过度优化**
   - 症状：样本内表现优异，样本外表现糟糕
   - 解决：保留样本外测试，参数保持合理范围

3. **前视偏差**
   - 症状：使用未来数据
   - 解决：严格按时间顺序，避免 data leakage

4. **存活偏差**
   - 症状：只选择表现好的品种展示
   - 解决：包含失败案例，真实报告

---

## 策略列表

### 已完成

✅ MSB-OB 订单块策略
✅ SuperTrend 趋势跟踪策略

### 计划中

🔲 双均线策略
🔲 布林带突破策略
🔲 RSI 均值回归策略
🔲 MACD 策略
🔲 海龟交易法
🔲 网格交易策略

---

## 文档结构

```
策略代码/
├── README.md                    # 本文件
├── MSB-OB订单块策略.md         # MSB-OB 策略详细说明
└── SuperTrend趋势跟踪策略.md   # SuperTrend 策略详细说明
```

---

## 使用建议

1. **新手**: 从 SuperTrend 开始，理解趋势跟踪基本原理
2. **进阶**: 学习 MSB-OB，掌握价格行为分析
3. **高级**: 结合多个策略，构建策略组合

---

## 贡献指南

添加新策略时请包含：

1. ✅ 策略概述和核心逻辑
2. ✅ 参数说明和推荐配置
3. ✅ 回测结果（含交易成本）
4. ✅ 适用场景和风险提示
5. ✅ 代码实现路径
6. ✅ 参考资料和许可证

---

**最后更新**: 2025-02-19
**维护者**: Quant Team
