# SuperTrend è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥

## ç­–ç•¥æ¦‚è¿°

**SuperTrend** æ˜¯åŸºäº ATR (Average True Range) çš„ç»å…¸è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥ï¼Œç”± Olivier Sevrat äº 2013 å¹´å¼€å‘ã€‚è¯¥ç­–ç•¥é€šè¿‡åŠ¨æ€è·Ÿè¸ªä»·æ ¼è¶‹åŠ¿ï¼Œåœ¨è¶‹åŠ¿æ–¹å‘æ˜ç¡®æ—¶è‡ªåŠ¨è°ƒæ•´æ­¢æŸä½ã€‚

**é¡¹ç›®è·¯å¾„**: `projects/akquant_supertrend/`

---

## æ ¸å¿ƒé€»è¾‘

### 1. SuperTrend æŒ‡æ ‡è®¡ç®—

```
åŸºæœ¬ä¸Šä¸‹å¸¦ = HL2 Â± (Multiplier Ã— ATR)

å…¶ä¸­ï¼š
- HL2 = (æœ€é«˜ä»· + æœ€ä½ä»·) / 2
- ATR = å¹³å‡çœŸå®æ³¢åŠ¨èŒƒå›´
- Multiplier = ATR å€æ•°å‚æ•°
```

### 2. è¶‹åŠ¿åˆ¤æ–­

- **ä¸Šå‡è¶‹åŠ¿**: æ”¶ç›˜ä»· > SuperTrend çº¿
- **ä¸‹é™è¶‹åŠ¿**: æ”¶ç›˜ä»· < SuperTrend çº¿

### 3. äº¤æ˜“ä¿¡å·

- **åšå¤š**: ä»·æ ¼ä»ä¸‹æ–¹çªç ´ SuperTrend çº¿
- **å¹³ä»“**: ä»·æ ¼ä»ä¸Šæ–¹è·Œç ´ SuperTrend çº¿
- **åå‘**: åŒæ—¶å¹³å¤šå¼€ç©ºï¼ˆå¦‚æœæ”¯æŒåšç©ºï¼‰

---

## ç­–ç•¥ç‰¹ç‚¹

### ä¼˜åŠ¿

âœ… **ç®€å•æ˜“ç”¨**: å‚æ•°å°‘ï¼Œæ˜“äºç†è§£å’Œä¼˜åŒ–
âœ… **è¶‹åŠ¿è·Ÿè¸ª**: èƒ½æœ‰æ•ˆæ•æ‰å¤§è¶‹åŠ¿è¡Œæƒ…
âœ… **åŠ¨æ€æ­¢æŸ**: éšæ³¢åŠ¨ç‡è°ƒæ•´æ­¢æŸä½
âœ… **å‡å°‘å™ªéŸ³**: ATR å¹³æ»‘æœºåˆ¶è¿‡æ»¤å°æ³¢åŠ¨

### åŠ£åŠ¿

âŒ **éœ‡è¡å¸‚äºæŸ**: æ¨ªç›˜éœ‡è¡æ—¶é¢‘ç¹æ­¢æŸ
âŒ **æ»åæ€§**: åŸºäºå†å²ä»·æ ¼ï¼Œä¿¡å·æœ‰å»¶è¿Ÿ
âŒ **å‚æ•°æ•æ„Ÿ**: ä¸åŒå¸‚åœºéœ€è¦è°ƒæ•´å‚æ•°
âŒ **æ— æ­¢ç›ˆ**: ä»…ä¾é è¶‹åŠ¿åè½¬å¹³ä»“

---

## å‚æ•°è¯´æ˜

### æ ¸å¿ƒå‚æ•°

| å‚æ•° | èŒƒå›´ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| Period | 5-20 | 10 | ATR è®¡ç®—å‘¨æœŸ |
| Multiplier | 2.0-4.0 | 3.0 | ATR å€æ•°ï¼Œå½±å“æ­¢æŸè·ç¦» |

### å‚æ•°å½±å“

- **Period å¢å¤§** â†’ ATR æ›´å¹³æ»‘ï¼Œä¿¡å·æ›´å°‘ä½†æ›´ç¨³å®š
- **Multiplier å¢å¤§** â†’ æ­¢æŸè·ç¦»å¢åŠ ï¼Œå‡å°‘å‡ä¿¡å·ä½†é™ä½ç›ˆäºæ¯”

### æ¨èå‚æ•°

**èºçº¹é’¢ RB9999 (15åˆ†é’Ÿ)**:
- (7, 3.0) - æ•æ„Ÿ
- (10, 3.0) - å¹³è¡¡
- (14, 2.5) - ç¨³å¥

**èºçº¹é’¢ RB9999 (60åˆ†é’Ÿ)**:
- (7, 3.0) - æœ€ä½³è¡¨ç°
- (10, 3.0) - æ¬¡ä¼˜
- (14, 2.5) - æœ€ä¿å®ˆ

---

## å›æµ‹ç»“æœ

### 60 åˆ†é’Ÿçº§åˆ« (2024å¹´ RB9999)

| å‚æ•° | æ”¶ç›Šç‡ | å¤æ™® | æœ€å¤§å›æ’¤ | èƒœç‡ | äº¤æ˜“æ¬¡æ•° |
|------|---------|------|----------|------|---------|
| (7, 3.0) | **-2.17%** | -7.10 | 2.17% | 43.84% | 219 |
| (10, 3.0) | -2.44% | -7.32 | 2.44% | 42.80% | 236 |
| (14, 2.5) | -2.78% | -6.92 | 2.78% | 44.13% | 247 |

### 15 åˆ†é’Ÿçº§åˆ« (2024å¹´ RB9999)

| å‚æ•° | æ”¶ç›Šç‡ | å¤æ™® | æœ€å¤§å›æ’¤ | èƒœç‡ | äº¤æ˜“æ¬¡æ•° |
|------|---------|------|----------|------|---------|
| (7, 3.0) | -3.96% | -12.43 | 3.96% | 43.79% | 427 |
| (10, 3.0) | -4.99% | -11.65 | 4.99% | 40.00% | 505 |
| (14, 2.5) | -5.57% | -12.21 | 5.57% | 42.65% | 565 |

---

## å…³é”®å‘ç°

### âš ï¸ ç­–ç•¥è¡¨ç°ä¸ä½³

**æ‰€æœ‰å‚æ•°ç»„åˆéƒ½äº§ç”Ÿè´Ÿæ”¶ç›Š**ï¼Œä¸»è¦åŸå› ï¼š

1. **2024 å¹´èºçº¹é’¢å¸‚åœºéœ‡è¡ä¸ºä¸»**
   - ç¼ºä¹æŒç»­è¶‹åŠ¿è¡Œæƒ…
   - é¢‘ç¹çš„å‡çªç ´å¯¼è‡´å¤šæ¬¡æ­¢æŸ

2. **äº¤æ˜“æˆæœ¬ä¾µèš€**
   - é«˜é¢‘äº¤æ˜“ (15åˆ†é’Ÿ) äºæŸæ›´ä¸¥é‡
   - æ‰‹ç»­è´¹å’Œæ»‘ç‚¹ç´¯ç§¯æ•ˆåº”æ˜æ˜¾

3. **ç­–ç•¥æœ¬èº«å±€é™**
   - SuperTrend åœ¨éœ‡è¡å¸‚å¤©ç„¶åŠ£åŠ¿
   - æ— è¶‹åŠ¿è¿‡æ»¤æœºåˆ¶

### ğŸ’¡ æ”¹è¿›æ–¹å‘

1. **æ·»åŠ è¶‹åŠ¿è¿‡æ»¤å™¨**
   - ADX > 25 æ—¶æ‰äº¤æ˜“
   - MACD æˆ– MA ç¡®è®¤è¶‹åŠ¿

2. **åŠ¨æ€å‚æ•°è°ƒæ•´**
   - æ³¢åŠ¨ç‡å¤§æ—¶å¢å¤§ Multiplier
   - è¶‹åŠ¿æ˜ç¡®æ—¶å‡å° Multiplier

3. **å¤šå“ç§ç»„åˆ**
   - åˆ†æ•£å•ä¸€å“ç§é£é™©
   - é€‰æ‹©è¶‹åŠ¿æ€§æ›´å¥½çš„å“ç§

4. **ç»“åˆå…¶ä»–æŒ‡æ ‡**
   - æˆäº¤é‡ç¡®è®¤
   - æ”¯æ’‘é˜»åŠ›ä½è¿‡æ»¤

---

## å®ç°æ¡†æ¶

### AKQuant å®ç°

**ä¼˜åŠ¿**:
- Rust å›æµ‹å¼•æ“ï¼Œæ€§èƒ½æä½³
- è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ– HTML æŠ¥å‘Š
- æ”¯æŒå¤šå‚æ•°æ‰¹é‡å›æµ‹

**ä»£ç ä½ç½®**: `projects/akquant_supertrend/`

**æ ¸å¿ƒæ–‡ä»¶**:
- `supertrend_strategy.py` - ç­–ç•¥å®ç°
- `backtest_supertrend.py` - å›æµ‹è„šæœ¬
- `prepare_akquant_data.py` - æ•°æ®å‡†å¤‡

### æŠ€æœ¯å®ç°

```python
# SuperTrend è®¡ç®— (NumPy)
def calculate_supertrend(high, low, close, period=10, multiplier=3.0):
    # 1. è®¡ç®— ATR
    tr = np.maximum(
        high - low,
        np.maximum(
            np.abs(high - np.roll(close, 1)),
            np.abs(low - np.roll(close, 1))
        )
    )
    atr = pd.Series(tr).rolling(period).mean().values

    # 2. è®¡ç®—åŸºæœ¬å¸¦
    hl2 = (high + low) / 2
    upper_band = hl2 + multiplier * atr
    lower_band = hl2 - multiplier * atr

    # 3. æœ€ç»ˆå¸¦ï¼ˆè€ƒè™‘å‰ä¸€å‘¨æœŸçŠ¶æ€ï¼‰
    final_upper = upper_band.copy()
    final_lower = lower_band.copy()

    for i in range(1, len(close)):
        if close[i-1] <= final_upper[i-1]:
            final_upper[i] = min(final_upper[i], final_upper[i-1])
        if close[i-1] >= final_lower[i-1]:
            final_lower[i] = max(final_lower[i], final_lower[i-1])

    # 4. SuperTrend çº¿
    supertrend = np.where(close > final_upper, final_lower, final_upper)

    return supertrend
```

---

## äº¤æ˜“æˆæœ¬è®¾ç½®

### èºçº¹é’¢æ ‡å‡†é…ç½®

| æˆæœ¬ç±»å‹ | å‚æ•° | è¯´æ˜ |
|---------|------|------|
| **åˆå§‹èµ„é‡‘** | 100,000 | è´¦æˆ·æœ¬é‡‘ |
| **ä½£é‡‘ç‡** | 0.0001 | ä¸‡åˆ†ä¹‹ä¸€ï¼ˆå¼€å¹³å„æ”¶ï¼‰ |
| **æ»‘ç‚¹** | 1 tick | 1å…ƒ/å¨ |
| **åˆçº¦ä¹˜æ•°** | 10 | 10å¨/æ‰‹ |
| **ä¿è¯é‡‘** | 10% | æ ‡å‡†ä¿è¯é‡‘æ¯”ä¾‹ |

**é‡è¦**: å›æµ‹å¿…é¡»åŒ…å«å®Œæ•´äº¤æ˜“æˆæœ¬ï¼Œå¦åˆ™ç»“æœä¼šä¸¥é‡å¤±çœŸï¼

---

## é€‚ç”¨åœºæ™¯

### âœ… é€‚ç”¨åœºæ™¯

1. **è¶‹åŠ¿æ˜æ˜¾çš„å¸‚åœº**
   - å¼ºä¸Šå‡è¶‹åŠ¿
   - æ˜ç¡®ä¸‹é™è¶‹åŠ¿
   - æ³¢åŠ¨ç‡é€‚ä¸­

2. **ä¸­é•¿å‘¨æœŸäº¤æ˜“**
   - æ—¥çº¿ã€å‘¨çº¿æ•ˆæœæœ€ä½³
   - 60 åˆ†é’Ÿçº§åˆ«æ¬¡ä¹‹
   - ä¸å»ºè®® 5 åˆ†é’Ÿä»¥ä¸‹

3. **è¶‹åŠ¿å“ç§**
   - å•†å“æœŸè´§ä¸­çš„è¶‹åŠ¿å“ç§
   - å¤–æ±‡ä¸»è¦è´§å¸å¯¹
   - åŠ å¯†è´§å¸è¶‹åŠ¿è¡Œæƒ…

### âŒ ä¸é€‚ç”¨åœºæ™¯

1. **éœ‡è¡å¸‚åœº**
   - æ¨ªç›˜æ•´ç†
   - åŒºé—´éœ‡è¡
   - å‡çªç ´é¢‘ç¹

2. **ä½æ³¢åŠ¨ç‡å¸‚åœº**
   - æˆäº¤æ¸…æ·¡
   - æ³¢åŠ¨ç‡è¿‡å°
   - ç¼ºä¹æ–¹å‘æ€§

3. **è¶…é«˜é¢‘äº¤æ˜“**
   - Tick çº§åˆ«
   - ç§’çº§äº¤æ˜“
   - æˆæœ¬è¿‡é«˜

---

## é£é™©æç¤º

âš ï¸ **é‡è¦è­¦å‘Š**

1. **å†å²è¡¨ç°ä¸ä»£è¡¨æœªæ¥**
   - 2024 å¹´å›æµ‹ç»“æœä¸ºè´Ÿ
   - ä¸åŒå¹´ä»½è¡¨ç°å·®å¼‚å¤§
   - éœ€å¤šå‘¨æœŸéªŒè¯

2. **ä¸¥æ ¼æ­¢æŸ**
   - SuperTrend æœ¬èº«æ˜¯åŠ¨æ€æ­¢æŸ
   - ä¸è¦æ‰‹åŠ¨ç§»åŠ¨æ­¢æŸ
   - é¿å…æƒ…ç»ªåŒ–äº¤æ˜“

3. **ä»“ä½ç®¡ç†**
   - å»ºè®®å•æ¬¡ä»“ä½ â‰¤ 30%
   - æ€»ä»“ä½ â‰¤ 50%
   - é¢„ç•™ä¿è¯é‡‘ç©ºé—´

4. **å‚æ•°ä¼˜åŒ–é™·é˜±**
   - è¿‡åº¦ä¼˜åŒ–å¯¼è‡´è¿‡æ‹Ÿåˆ
   - æ ·æœ¬å¤–æµ‹è¯•å¾ˆé‡è¦
   - ä¿æŒå‚æ•°åˆç†æ€§

---

## å‚è€ƒèµ„æ–™

- **åŸåˆ›ä½œè€…**: Olivier Sevrat
- **å‘å¸ƒæ—¶é—´**: 2013å¹´
- **TradingView**: [SuperTrend Indicator](https://www.tradingview.com/script/P5QPu9e/)
- **AKQuant æ–‡æ¡£**: [https://akquant.akfamily.xyz/](https://akquant.akfamily.xyz/)
- **AKQuant GitHub**: [https://github.com/akfamily/akquant](https://github.com/akfamily/akquant)

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚

---

**åˆ›å»ºæ—¶é—´**: 2025-02-19
**æœ€åæ›´æ–°**: 2025-02-19
**æ¡†æ¶ç‰ˆæœ¬**: AKQuant 1.x
**æ•°æ®æ¥æº**: èºçº¹é’¢ RB9999 ä¸»åŠ›è¿ç»­
